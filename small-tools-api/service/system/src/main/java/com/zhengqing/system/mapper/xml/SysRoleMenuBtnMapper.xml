<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhengqing.system.mapper.SysRoleMenuBtnMapper">

  <select
    id="selectRoleMenuBtns"
    resultType="com.zhengqing.system.model.vo.SysRoleMenuBtnListVO">
    SELECT rmt.*,
           sd.`value` btnVal
    FROM t_sys_role_menu_btn rmt
           INNER JOIN t_sys_dict sd on sd.id = rmt.btn_id
    WHERE rmt.is_valid = 1
  </select>

  <select
    id="selectBtnsByRoleIdAndMenuId"
    resultType="java.lang.Integer">
    SELECT rmt.btn_id
    FROM t_sys_role_menu_btn rmt
           INNER JOIN t_sys_menu_btn mb ON mb.btn_id = rmt.btn_id
    WHERE rmt.is_valid = 1
      AND rmt.role_id = #{roleId}
      AND mb.menu_id = #{menuId}
      AND rmt.menu_id = #{menuId}
  </select>

</mapper>
